@model IEnumerable<IpBan>
@{
    ViewData["Title"] = "IP 차단 관리";
}

<h1>IP 차단 관리</h1>

<a href="/Admin/BanIp" class="btn btn-primary mb-3">새 IP 차단</a>

<table class="table">
    <thead>
        <tr>
            <th>IP 주소</th>
            <th>사유</th>
            <th>차단자</th>
            <th>차단일</th>
            <th>만료일</th>
            <th>작업</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var ban in Model)
        {
            <tr>
                <td>@ban.IpAddress</td>
                <td>@(ban.Reason ?? "-")</td>
                <td>@ban.BannedBy?.Email</td>
                <td>@ban.BannedAt.ToString("yyyy-MM-dd HH:mm")</td>
                <td>@(ban.ExpiresAt?.ToString("yyyy-MM-dd HH:mm") ?? "영구")</td>
                <td>
                    <form asp-action="UnbanIp" method="post"
                          onsubmit="return confirm('차단을 해제하시겠습니까?');">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="id" value="@ban.Id" />
                        <button type="submit" class="btn btn-sm btn-warning">해제</button>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>

<a href="/Admin" class="btn btn-secondary">대시보드로 돌아가기</a>
